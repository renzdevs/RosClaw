version: "3.8"

# Mode A: Same Machine â€” OpenClaw + ROS2 on the robot itself.
# The plugin uses LocalTransport (direct DDS, no network needed).

services:
  # ROS2 stack + OpenClaw + RosClaw plugin, all in one container
  rosclaw:
    build:
      context: ..
      dockerfile: docker/Dockerfile.rosclaw
    image: rosclaw/plugin:latest
    environment:
      - ROSCLAW_TRANSPORT_MODE=local
      - ROS_DOMAIN_ID=0
    network_mode: host
